<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <!-- FontAwesome-->
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css' rel='stylesheet' />
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <title>MarkIT!</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

    <!--Image-->
    <img src="MarkIT2500.png" style="width:100%" height="500px">
    <div>
      <div class="container" style="padding: 40px">
  
        <!--Store-->
        <div class="input-field">
            <i class="material-icons prefix red-text">store</i>
            <input id="Store" type="text" class="validate">
            <label for="Store">Store / Name of List</label>
          </div>
  
          <!--Chips-->
          <div class="chips chips-placeholder"></div>
  
          <!--Notes-->
          <div class="input-field col s6">
            <i class="material-icons prefix purple-text">comment</i>
            <input id="icon_telephone" type="tel" class="validate">
            <label for="icon_telephone">Notes</label>
          </div>
  
          <!--Receipt Upload-->
          <div class="col s6">
            <form action="" id="upload">
              <fieldset>
                <legend style="display:none;">Upload Image</legend>
                <p style="display:none;">
                  <label for="upload_preset">Unsigned upload Preset: <input type="text" name="upload_preset" value=""
                      id="upload_preset">(set it <a
                      href="https://cloudinary.com/console/settings/upload#upload_presets">here</a>)</label>
                </p>
                <div class="file-field input-field">
                  <div class="btn green">
                    <span>Receipt</span>
                    <input type="file" name="file" id="file">
                  </div>
                  <div class="file-path-wrapper">
                    <input id="update_val" type="text" class="file-path validate" placeholder="Upload your receipt to keep track of expenses.">
                  </div>
                </div>
                <br />
              </fieldset>
            </form>
          </div>
  
          <!--Save List Button-->
          <!-- <button class="btn waves-effect waves-light btn orange " type="submit" name="action">Save List
            <i class="material-icons left">local_grocery_store</i>
          </button> -->
          <a onclick="M.toast({html: 'Your list is saved!'})" class="btn waves-effect waves-light btn-large orange"
            type="submit" name="action">Save List
            <i class="material-icons left">local_grocery_store</i></a>
        </div>
      </div>
    </div>
  
  
    <!--Footer-->
    <footer class="page-footer green">
      <div class="row">
        <div class="col s6">
          <h4 class="white-text">MarkIT</h4>
          <p class="white-text">Never forget your list with MarkIT, where you can easily create and update
            multiple lists, take extra notes and even upload the image of your receipts.
            Great for business owners and busy moms!
          </p>
        </div>
        <div class="fixed-action-btn"><a class="btn-floating btn-large pulse red" href="lists.html"><i></i>LISTS</a></div>
      </div>
      <div class="footer-copyright">Â© 2020 Copyright
  
    </footer>
  </body>
  </footer>
</body>


  <script src="http://code.jquery.com/jquery.min.js"></script>
  <script src="..//js/action.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
  
  <script>//Temporary JS, MUST BE REALLOCATED!

    // Chips - https://materializecss.com/chips.html
    var tag_placeholder = document.querySelectorAll(".chips-placeholder");
    M.Chips.init(tag_placeholder, {
      placeholder: 'Enter your items',
      secondaryPlaceholder: 'Add more!'
    })
    // Toast - https://materializecss.com/toasts.html
    var toast = document.addEventListener()
    var submit = M.toast({ html: 'Your list is saved!' })
  </script>
  
  <script>
    Vue.component('uncompleted', {
      props: ['text', 'done', 'index',],
      template: `
				<div class="collection-item">
					<label>
		<input id="checkbox" type="checkbox" v-on:click="$emit('act-update', index)">
			<span>{{text}}</span>
				</label>
			<div v-on:click="$emit('act-remove', index)" class="secondary-content">
						<i class="material-icons red-text">close</i>
					</div>
				</div>				
			`
    })
    Vue.component('completed', {
      props: ['text', 'done', 'index'],
      template: `
				<div class="collection-item">
					<label>
			<input id="checkbox" type="checkbox" checked="unchecked" v-on:click="$emit('act-update', index)">
			<span>{{text}}</span>
			</label>
				<div v-on:click="$emit('act-remove', index)" class="secondary-content">
						<i class="material-icons red-text">close</i>
					</div>
				</div>
			`
    })
    var app = new Vue({
      el: '#app',
      data: {
        itemName: '',
        checked: '',
        showCompleted: true,
        items: []
      },
      methods: {
        addToList() {
          $.ajax("/api/store", {    
            data: JSON.stringify({itemName:this.itemName}),
            contentType: 'application/json',
            type: 'POST',
            success: function(msg){        
        alert( "Data Saved: " + msg );
            },    
          error: function(XMLHttpRequest, textStatus, errorThrown)
            {        
              alert("some error");    
            }})
              if (this.itemName.length > 30) {
            alert("You can't enter more than 30 characters");
            this.itemName = '';
            return;
          }
          if (this.itemName == '') {
            alert("Please enter something");
            this.itemName = '';
            return;
          }
          else {
            let temp = {
              text: this.itemName,
              done: false
            };
            this.items.splice(0, 0, temp);
            this.itemName = '';
          }
        },
        removeFromList(index) {
          this.items.splice(index, 1);
        },
        updateStatus(index) {
          let oldStatus = this.items[index].done;
          this.items[index].done = !oldStatus;
        },
        toggleCompleted() {
          var s = document.getElementById("completed-switch").style;
          console.log(s.display)
        }
      },
      mounted() {
        console.log("App mounted")
        if (localStorage.getItem('items')) this.items = JSON.parse(localStorage.getItem('items'));
      },
      watch: {
        items: {
          handler() {
            console.log('Items changed!');
            localStorage.setItem('items', JSON.stringify(this.items));
          },
          deep: true,
        },
      },
    })
    $
  </script>

<script>//Temporary JS, MUST BE REALLOCATED!

  // Chips - https://materializecss.com/chips.html
  var tag_placeholder = document.querySelectorAll(".chips-placeholder");
  M.Chips.init(tag_placeholder, {
    placeholder: 'Enter your items',
    secondaryPlaceholder: 'Add more!'
  })
  // Toast - https://materializecss.com/toasts.html
  var toast = document.addEventListener()
  var submit = M.toast({ html: 'Your list is saved!' })
</script>
<!-- <script>
$(document).ready(function(){
$('.carousel').carousel({fullWidth:true}).css('height', $(window).height)
})

</script>
<script>
  .carousel-item>img{
    width: 100%;
    height: 100%;
  }
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var drop = document.querySelectorAll('.dropdown-trigger');
    var instances = M.Dropdown.init(drop, options);
  });

</script> -->

</html>